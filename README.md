# AI调节汽车座椅按摩系统

一个基于AI智能算法的汽车座椅按摩系统，根据用户体征、坐姿、车辆状态等多种参数，智能调节14个按摩点的力度，并提供4个气袋的侧向支撑。

## 项目概述

本系统通过分析用户的体重、坐姿、穿着、生理指标（心率、呼吸频率）以及车辆行驶状态（转弯、侧向加速度、AEB制动），智能计算最佳的按摩力度分布，并在必要时启动气袋支撑系统，确保驾驶安全与舒适性的完美平衡。

## 核心功能

### 🎯 智能按摩控制
- **14个按摩点**精确控制，覆盖肩部、靠背、腰部、座垫等关键部位
- **AI算法**与**规则算法**双重保障，确保计算准确性
- **4级按摩模式** 轻柔、普通、加强、极强

### 🛡️ 安全保护机制
- **生理监控**：实时监测心率和呼吸频率，异常时自动调节或停止按摩
- **车辆状态感知**：根据转弯、侧向加速度自动启动气袋支撑
- **紧急制动保护**：AEB触发时所有气袋立即支撑

### 🎨 3D可视化界面
- **Three.js**打造的3D座椅模型
- **实时颜色映射**：白色（轻柔）→ 蓝色（普通）→ 橙色（加强）→ 红色（极强）
- **呼吸灯效果**：按摩点动态闪烁显示

### 📊 智能场景管理
- **6个预设场景**，一键应用典型驾驶环境参数
- **实时状态展示**，打字机效果流式显示按摩建议

### 按摩模式分级
| 按摩模式 | 力度范围 | 颜色标识 | 适用场景 |
|---------|----------|----------|----------|
| 无按摩  | <20      | 灰色     | 无需按摩 |
| 轻柔    | 20-30    | 白色     | 舒缓放松 |
| 普通    | 30-40    | 蓝色     | 标准按摩 |
| 加强    | 40-50    | 橙色     | 强化按摩 |
| 极强    | 50-60    | 红色     | 最强按摩 |

## 技术架构

### 前端技术栈
- **Vue 3** - 现代化前端框架
- **Three.js** - 3D图形渲染
- **Element Plus** - UI组件库
- **Axios** - HTTP客户端
- **Vite** - 构建工具

### 后端技术栈
- **Flask** - Python Web框架
- **SQLAlchemy** - 数据库ORM
- **MySQL** - 数据存储
- **scikit-learn** - 机器学习模型
- **NumPy** - 数值计算

## 系统安装

### 环境要求
- Python 3.8+
- Node.js 16+
- MySQL 8.0+

### 快速启动

1. **数据库初始化**
   ```bash
   # 双击运行
   初次运行mysql初始化.bat
   ```

2. **启动后端服务**
   ```bash
   # 双击运行
   后端服务运行.bat
   ```

3. **启动前端服务**
   ```bash
   # 双击运行
   前端服务运行.bat
   ```

4. **访问系统**
   - 打开浏览器访问：http://localhost:5173

## 使用指南

### 参数设置
在侧边栏参数面板中配置：

| 参数类型 | 参数说明 | 取值范围 |
|---------|---------|----------|
| **基础参数** | 坐姿、体重、穿着 | 正常/前倾/后仰/左倾/右倾，30-150kg，薄/中/厚 |
| **生理参数** | 心率、呼吸频率 | 40-200次/分，5-40次/分 |
| **车辆状态** | 转弯方向、侧向加速度 | 无/左/右，0-1G |
| **压力分布** | 14个部位压力值 | 0-100 |

### 场景选择
系统提供6个典型场景：
- 正常驾驶心率高
- 前倾厚衣服
- 左转弯支撑
- 左倾强化
- AEB紧急制动
- 后仰极强模式

### 结果解读
- **按摩模式**：根据最大力度值自动判定
- **颜色映射**：直观显示每个按摩点的强度等级
- **气袋状态**：橙色表示支撑激活，灰色表示待机

## 算法原理

### 安全阈值
- 心率>120或呼吸>24：停止按摩
- 心率100-120或呼吸20-24：降低80%力度
- 侧向加速度>0.05G：启动气袋支撑
- 最大按摩力度：60N

### AI模型
- **RandomForest**多输出回归模型
- **28维特征向量**输入
- **14维按摩力度**输出
- 自动降级至规则算法

## 项目结构

```
AI调节汽车座椅按摩系统/
├── frontend/                 # 前端项目
│   ├── src/
│   │   ├── App.vue          # 主应用组件
│   │   └── main.js          # 入口文件
│   ├── public/
│   │   ├── seat.glb         # 3D座椅模型
│   │   └── leather.jpg      # 材质贴图
│   └── package.json         # 前端依赖
├── backend/                  # 后端项目
│   ├── app.py              # Flask主应用
│   ├── models.py           # 数据模型
│   ├── config.py           # 配置文件
│   ├── train_ai_model.py   # AI模型训练
│   └── requirements.txt    # 后端依赖
├── 初次运行mysql初始化.bat    # 数据库初始化脚本
├── 后端服务运行.bat          # 后端启动脚本
└── 前端服务运行.bat          # 前端启动脚本
```

## API接口

### 参数提交示例
```http
POST /api/input
Content-Type: application/json

{
  "posture": "正常",
  "body_weight": 75,
  "clothing": "中",
  "pressure_data": [30,30,30,30,30,30,30,30,30,30,30,30,30,30],
  "hr": 70,
  "br": 15,
  "car_turn": "无",
  "lateral_acceleration": 0,
  "aeb_triggered": false,
  "side_support_status": [false,false,false,false]
}
```

### 获取结果示例
```http
GET /api/massage/latest

{
  "massage_force": [35,35,35,35,35,35,35,35,35,35,35,35,35,35],
  "side_support": [false,false,false,false],
  "massage_status": "当前推荐模式：普通模式\n各部位详细建议..."
}
```

## 典型应用场景

### 场景1：正常驾驶/薄衣服/轻压力/心率高
- **输入**：正常坐姿，75kg体重，薄衣服，心率110
- **输出**：轻柔模式，所有按摩球白色
- **特点**：心率偏高时自动降低按摩强度

### 场景2：前倾/厚衣服/轻体重
- **输入**：前倾坐姿，50kg体重，厚衣服，心率正常
- **输出**：普通模式，所有按摩球蓝色
- **特点**：厚衣服补偿，前倾加强腰部按摩

### 场景3：左转弯/高速/气袋支撑
- **输入**：左转弯，侧向加速度0.08G，重体重
- **输出**：停止按摩，右侧气袋支撑激活
- **特点**：转弯时安全优先，停止按摩启动支撑

### 场景4：AEB触发/紧急制动
- **输入**：AEB触发，所有安全参数正常
- **输出**：停止按摩，所有气袋支撑
- **特点**：紧急情况下全面保护

### 场景5：后仰/厚衣服/重体重/极强模式
- **输入**：后仰坐姿，95kg体重，厚衣服，高压力分布
- **输出**：极强模式，所有按摩球红色
- **特点**：最强按摩力度，后仰加强肩部

## 开发团队

本项目专注于汽车座椅按摩系统的智能化研发，致力于提升驾驶舒适性和安全性。

## 许可证

本项目仅供学习和研究使用。
